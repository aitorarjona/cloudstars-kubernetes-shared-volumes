apiVersion: v1
kind: Pod
metadata:
  name: process-sender
spec:
  containers:
    - image: aitorarjona/k8s-mmap-tests:latest
      imagePullPolicy: Always
      name: process-sender
      command: ["/bin/sh", "-ec", "sleep 1000"]
      volumeMounts:
        - name: tmp
          mountPath: /tmp
        - name: sock
          mountPath: /sock
  volumes:
    - name: tmp
      emptyDir:
        medium: Memory
    - name: sock
      hostPath:
        path: /tmp/mmap
        type: DirectoryOrCreate
---
apiVersion: v1
kind: Pod
metadata:
  name: process-receiver
spec:
  containers:
    - image: aitorarjona/k8s-mmap-tests:latest
      imagePullPolicy: Always
      name: process-receiver
      command: ["/bin/sh", "-ec", "sleep 1000"]
      volumeMounts:
        - name: tmp
          mountPath: /tmp
        - name: sock
          mountPath: /sock
  volumes:
    - name: tmp
      emptyDir:
        medium: Memory
    - name: sock
      hostPath:
        path: /tmp/mmap
        type: DirectoryOrCreate
